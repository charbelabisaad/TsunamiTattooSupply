 

<div class="modal fade" id="saveUserModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            
            <div class="modal-header">
                <h5 class="modal-title">Save User</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <form id="userForm" asp-action="SaveUser" asp-controller="UserAccounts" method="post">
                <div class="modal-body">
                    <div class="row">
                        
                        <!-- Username -->
                        <div class="col-md-6 mb-3">
                            <label for="Username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="Username" placeholder="Fill Username" name="Username"
                                   required />
                        </div>

                        <!-- First Name -->
                        <div class="col-md-6 mb-3">
                            <label for="FirstName" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="FirstName" placeholder="Fill First Name" name="FirstName"
                                  required />
                        </div>

                        <!-- Last Name -->
                        <div class="col-md-6 mb-3">
                            <label for="LastName" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="LastName" placeholder="Fill Last Name" name="LastName"
                                    required />
                        </div>

                        <!-- User Type -->
                        <div class="col-md-6 mb-3">
                            <label for="UserTypeID" class="form-label">User Type</label>
                            <select id="UserTypeID" name="UserTypeID" class="custom-select" required>
                                <option value="">-- Select User Type --</option>
                                @foreach (var type in ViewBag.UserTypes)
                                {
                                    <option value="@type.ID">@type.Description</option>
                                }
                            </select>
                        </div>

                        <!-- Status -->
                        <div class="col-md-12 mb-3"> 
                            <div class="custom-control custom-switch">
                                <input type="checkbox" class="custom-control-input" id="StatusToggle" checked />
                                <label class="custom-control-label" for="StatusToggle" id="statusLabel">
                                     
                                </label>
                                <input type="hidden" id="StatusID" name="StatusID"  value="A" />
                            </div>
                        </div>

                      

                    </div>
                </div>

                <div class="modal-footer">
                    <div class="row w-100">
                        <!-- Validation/Error message -->
                        <div id="modalMessage" class="col-md-7 d-flex align-items-center text-danger" style="display:none;">
                            <!-- message goes here -->
                        </div>

                        <!-- Buttons -->
                        <div class="col-md-5 d-flex align-items-center justify-content-end">
                            <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">
                                <i class="fas fa-ban"></i> Cancel
                            </button>

                            <button type="submit" id="btnSaveUser" class="btn btn-primary ml-2">
                                <span class="spinner-border spinner-border-sm d-none" id="btnSaveSpinner" role="status" aria-hidden="true"></span>
                                <i class="fas fa-save"></i> Save
                            </button>
                        </div>
                    </div>
                </div> 
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.getElementById("StatusToggle");
        const hidden = document.getElementById("StatusID");
        const label = document.getElementById("statusLabel");

        if (toggle && hidden && label) {
            toggle.addEventListener("change", function () {
                if (toggle.checked) {
                    label.textContent = "Active";
                    hidden.value = "A";
                } else {
                    label.textContent = "Inactive";
                    hidden.value = "I";
                }
            });
        }

         const btnNewUser = document.getElementById("btnNewUser");
        if (btnNewUser) {
            btnNewUser.addEventListener("click", function () {
                ShowNewUser();
            });
        }

    });

    function ShowNewUser() {
        // Reset form
        const form = document.getElementById("userForm");
        if (form) form.reset();

        // Reset toggle status
        const toggle = document.getElementById("StatusToggle");
        const hidden = document.getElementById("StatusID");
        const label = document.getElementById("statusLabel");

        if (toggle && hidden && label) {
            toggle.checked = true;
            hidden.value = "A";
            label.textContent = "Active";
        }

        // Show modal
        const modalEl = document.getElementById("saveUserModal");
        const modal = new bootstrap.Modal(modalEl);
        modal.show();
    }
</script>
